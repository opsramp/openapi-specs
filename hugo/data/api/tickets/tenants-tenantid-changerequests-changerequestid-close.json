{"summary":"Close change request","description":"Closes a change request.\n\nFollow the steps before closing a change request:\n\nStep 1: Check the status flow transition for Closed.\n1. Login to OpsRamp.\n2. Click Setup.\n3. On the left-hand side panel, click Service Desk.\n4. In Configuration, click Status Flows.\n5. Check the status flow for the entity Change Request.\n6. Check the transition of the status Closed. If Closed is available this indicates the change request can be closed; otherwise, the change request cannot be closed.\n\nStep 2: Provide the reason for changing the status.\n1. Click Setup.\n2. On the left-hand side panel, click Service Desk.\n3. In Configuration, click Status Change Reasons and then click Add.\n4. Select the scope, client, request type and entity status as Closed, provide the reason and then click Submit.\n\nStep 3: Enable the option to provide reason for closing a change request.\nThis is normally an optional step. However, this step is required to provide a reason for closing the change request.\n1. Click Setup.\n2. On the left-hand side panel, click Service Desk.\n3. In Configuration, click Settings.\n4. Select client and then click Customize.\n5. In Incident Request section, select option Enable reasons to change status Close and then click Save.\n\n##### Notes\n- Use the get change request API to check if status Closed and reasons to provide for Close are enabled. If under the field allowedStatus if name: Closed and reasonsEnabled: true, this indicates reasons should be provided for closing an incident.\n- Use the get status change reasons API to provide the reasons to Close. The reasons configured in status: Closed are accepted, but a new provided reason would result in an error.\n- Date format must be yyyy-MM-ddTHH:mm:ssZ (GMT).","operations":{"post":{"description":"","parameters":"","requestBody":{"content":"application/json","schema":{"type":"object","properties":{"reason":{"type":"string","description":"Reason for closing the change request. This is mandatory only if the option Enable reasons to change status Close is enabled for change request in service desk settings (See example steps)."},"notes":{"type":"string","description":"Additional information to add to a change request."}}}},"requestBodyExamples":{"example-1":{"value":{"reason":"Request is implemented","notes":"Demo note on change request"}}},"responses":{"200":{"description":"OK","schema":{"title":"problem","type":"object","properties":{"id":{"type":"string"},"subject":{"type":"string","description":"Subject of the problem.\n"},"description":{"type":"string","description":"Description of the problem.\n"},"status":{"type":"string","description":"Status of problem. Follow the steps to update the status of problem:\n\n1. Use the get problem API to check:\n2. Status flow transitions of problem.The status flows are defined in the field allowedStatus.\nExample: \"name\" : \"Update\"\n3. Option to provide reasons to change the status is enabled.\"reasonsEnabled\" : \"true\" indicates, reason is mandatory while changing the status.\"reasonsEnabled\" : \"false\" indicates reason is optional.\n4. If status change reasons are defined, use the get status change reasons to get the list of reasons. Provide the reasons configured in status \"Update\"."},"oldStatus":{"type":"string"},"priority":{"type":"string","description":"Priority of the problem.\n"},"oldPriority":{"type":"string"},"requester":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"assignedUser":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"assigneeGroup":{"title":"group","type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"},"userCount":{"type":"integer"}}},"resources":{"type":"array","items":{"title":"resource","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"type":{"type":"string"},"metaData":{"type":"object"},"resourceType":{"type":"string"},"hostName":{"type":"string"},"resourceName":{"type":"string"},"aliasName":{"type":"string"}}}},"extTicketId":{"type":"string","description":"Attach an external ticket ID to the problem."},"customFields":{"type":"array","items":{"title":"customField","type":"object","description":"User-defined fields. User can create additional fields to attach more information related to the change request. Create a custom field and use the get change request custom fields get the list of the customized fields for change request.","properties":{"id":{"type":"string"},"classCode":{"type":"string"},"displayLabel":{"type":"string"},"name":{"type":"string"},"fieldType":{"type":"string"},"mandatory":{"type":"boolean"},"editable":{"type":"boolean"},"description":{"type":"string"},"value":{"type":"string"},"defaultValue":{"type":"string"},"options":{"type":"array","items":{"type":"object","properties":{"label":{"type":"string"},"value":{"type":"string"}}}},"selectedOption":{"type":"object","properties":{"label":{"type":"string"},"value":{"type":"string"}}},"customField":{"type":"boolean"}}}},"cc":{"type":"string","description":"Cc email."},"ticketArisedTime":{"type":"string"},"createdUser":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"category":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"}}},"reason":{"type":"string"},"alertIds":{"type":"array","items":{}},"reOpenCount":{"type":"integer"},"createdDate":{"type":"string","format":"date-time"},"allowedStatus":{"type":"array","items":{"title":"status","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"reasonsEnabled":{"type":"boolean"},"reasonsDefined":{"type":"boolean"}}}},"client":{"title":"client","type":"object","properties":{"id":{"type":"integer"},"uniqueId":{"type":"string"},"name":{"type":"string"},"activated":{"type":"boolean"},"updatedTime":{"type":"string"},"createdTime":{"type":"string","format":"date-time"}}},"subCategory":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"}}},"updatedDate":{"type":"string","format":"date-time"},"priorityUpdatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"priorityUpdatedDate":{"type":"string","format":"date-time"},"statusUpdatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"statusUpdatedDate":{"type":"string","format":"date-time"},"resolvedDate":{"type":"string","format":"date-time"},"slaDetails":{"title":"slaDetails","type":"object","properties":{"resolutionTime":{"type":"integer"},"responseTime":{"type":"integer"},"responseBreach":{"type":"boolean"},"resolutionBreach":{"type":"boolean"},"responseBreachDate":{"type":"string"},"resolutionBreachDate":{"type":"string"},"slaPolicy":{"title":"slaPolicy","type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"timezone":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"label":{"type":"string"},"code":{"type":"string"}}},"businessSchedule":{"type":"object","properties":{"id":{"type":"integer"},"shiftType":{"type":"integer"},"startTime":{"type":"string"},"endTime":{"type":"string"},"sunday":{"type":"boolean"},"monday":{"type":"boolean"},"tuesday":{"type":"boolean"},"wednesday":{"type":"boolean"},"thursday":{"type":"boolean"},"friday":{"type":"boolean"},"saturday":{"type":"boolean"}}},"requestType":{"type":"string"},"withinBussinessHours":{"type":"boolean"},"active":{"type":"boolean"},"priority":{"type":"string"},"createdDate":{"type":"string","format":"date-time"},"updatedDate":{"type":"string","format":"date-time"},"responseBreachTime":{"type":"integer"},"resolutionBreachTime":{"type":"integer"},"responseReminders":{"type":"array","items":{"type":"object","properties":{"reminderTime":{"type":"integer"},"percentage":{"type":"integer"},"cc":{"type":"string"}}}},"resolutionReminders":{"type":"array","items":{"type":"object","properties":{"reminderTime":{"type":"integer"},"cc":{"type":"string"}}}},"createdBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"updatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}}}}}},"source":{"type":"string"},"rootCause":{"type":"string","description":"Root cause of the problem."},"workaround":{"type":"string","description":"Temporary solution to solve the problem."},"application":{"type":"string","description":"Application from which the problem is generated.\n"},"statusFlow":{"type":"array","items":{"title":"statusHistory","type":"object","properties":{"status":{"type":"string"},"timeSpent":{"type":"integer"},"createdDate":{"type":"string","format":"date-time"},"updatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"reason":{"type":"string"},"notes":{"type":"string"}}}},"knowledgeArticleIds":{"type":"array","description":"(Optional) Attach knowledge base articles related to the problem for further reference. To get a knowledge base article ID:\n1. Log into OpsRamp.\n2. Click Knowledge Base.\n3. Select the required article and then copy the article ID.\n4. Provide the article ID in \"knowledgeArticleIds\" field.\nExample: \"knowledgeArticleIds\": 25, 16.","items":{"type":"integer"}},"attachedArticles":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"subject":{"type":"string"}}}},"estimatedHours":{"type":"integer","description":"Estimated time for resolving a problem. For example, a user estimates 3 hours for completion of a problem, the user provides value as \"estimatedHours\": \"3\"."},"estimatedMinutes":{"type":"integer","description":"Estimated time for resolving a problem. For example, a user estimates 45 minutes for completion of a task, then user provides value as \"estimatedMinutes\": \"45\"."},"timeSpent":{"type":"integer"},"notes":{"type":"string"},"closedSummary":{"type":"string"},"suspendEndDate":{"type":"string","format":"date-time"},"closedDate":{"type":"string"},"tags":{"type":"string"},"changeRequest":{"description":"Attach a problem related to the problem.","type":"object","properties":{"id":{"type":"string"}}},"knownIssue":{"type":"boolean"},"attachments":{"type":"array","items":{"title":"attachment","type":"object","properties":{"name":{"type":"string"},"file":{"type":"string"},"id":{"type":"integer"},"createdDate":{"type":"string","format":"date-time"},"contentURL":{"type":"string"}}}},"channelId":{"type":"integer"}}},"examples":{"example-1":{"value":{"id":"CHG0000000222","subject":"Increase bandwidth of internet","description":"Internet very slow in SJ office, and servers not accessible","status":"Closed","oldStatus":"Open","priority":"High","oldPriority":"Normal","notes":"Demo note on change request","closedSummary":"closed summary","requester":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"},"assignedUser":{"id":"USR0000000013","loginName":"brocadePAdmin@opsramp.com","lastName":"Inc PAdmin","firstName":"Brocade","email":"sample@opsramp.com","phoneNumber":"8096250653"},"assigneeGroup":{"id":5,"name":"Brocade Inc Users","description":"Brocade Partner Users"},"resources":[{"id":"ad0a218d-7512-435c-9b58-614470ee8658","name":"WORK-PC","type":"DEVICE"},{"id":"SGP-c2af3866-fc89-47dd-b83f-bcc8df0b2a0a","name":"VTH Services","type":"SERVICE"},{"id":"DGP-420a80f4-5fba-46d5-a1c1-20e2df4a326a","name":"HYD","type":"DEVICE_GROUP"}],"customFields":[{"id":"UDF0000003808","classCode":"CHANGE","displayLabel":"text field","name":"text_field_3808","fieldType":"TYPE_TEXT","mandatory":false,"editable":true,"description":"all partners","defaultValue":""},{"id":"UDF0000003809","classCode":"CHANGE","displayLabel":"drop down","name":"drop_down_3809","fieldType":"TYPE_DROPDOWN","mandatory":false,"editable":true,"description":"testing all partners","options":[{"label":"one","value":"1"},{"label":"two","value":"2"}],"defaultValue":""},{"id":"UDF0000003810","classCode":"CHANGE","displayLabel":"numeric","name":"numeric_3810","fieldType":"TYPE_NUMBER","mandatory":false,"editable":true,"description":"testing numeric","defaultValue":""},{"id":"UDF0000003790","classCode":"CHANGE","displayLabel":"drop-down-api-lab","name":"drop_down_api_lab_3790","fieldType":"TYPE_DROPDOWN","mandatory":false,"editable":true,"description":"Test case","options":[{"label":"first","value":"1"},{"label":"second","value":"2"}],"value":"1","defaultValue":"","selectedOption":{"label":"first","value":"1"}},{"id":"UDF0000003791","classCode":"CHANGE","displayLabel":"text-api-lab","name":"text_api_lab_3791","fieldType":"TYPE_TEXT","mandatory":false,"editable":true,"description":"test case for text field","value":"request custom field - text-updated","defaultValue":"Test Text"},{"id":"UDF0000003792","classCode":"CHANGE","displayLabel":"multi line text-api-lab","name":"multi_line_text_api_lab_3792","fieldType":"TYPE_TEXTAREA","mandatory":false,"editable":true,"description":"test case for multi line text","defaultValue":"multi \nline \ntext"},{"id":"UDF0000003793","classCode":"CHANGE","displayLabel":"Numeric-api-lab","name":"numeric_api_lab_3793","fieldType":"TYPE_NUMBER","mandatory":false,"editable":true,"description":"numeric test case","defaultValue":"1"},{"id":"UDF0000003794","classCode":"CHANGE","displayLabel":"checkbox-api-lab","name":"checkbox_api_lab_3794","fieldType":"TYPE_CHECKBOX","mandatory":false,"editable":true,"description":"test case for check box","options":[{"label":"yes","value":"1"}],"defaultValue":"0"},{"id":"UDF0000003795","classCode":"CHANGE","displayLabel":"Date-ap-lab","name":"date_ap_lab_3795","fieldType":"TYPE_DATE","mandatory":false,"editable":true,"description":"test case for date field","defaultValue":"2016-02-26T12:13:00+0000"},{"id":"UDF0000003796","classCode":"CHANGE","displayLabel":"dateTime-api-lab","name":"datetime_api_lab_3796","fieldType":"TYPE_DATETIME","mandatory":false,"editable":true,"description":"test case for Date and time","defaultValue":"2016-02-26T12:13:00+0000"}],"cc":"sample@opsramp.com","ticketArisedTime":"","createdUser":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"},"reason":"CR Close","category":{"id":6,"name":"Request Level"},"alertIds":[],"reOpenCount":0,"createdDate":"2016-07-26T20:13:45+0530","suspendEndDate":"2016-08-23T03:57:00+0530","allowedStatus":[],"client":{"id":8,"uniqueId":"client_8","name":"Brocade Lab","activated":true},"subCategory":{"id":8,"name":"Low"},"updatedDate":"2016-11-25T09:48:42+0530","priorityUpdatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"},"priorityUpdatedDate":"2016-08-12T06:56:51+0530","statusUpdatedBy":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"},"statusUpdatedDate":"2016-11-25T09:48:42+0530","resolvedDate":"2016-08-12T06:57:46+0530","closedDate":"2016-11-25T09:48:42+0530","slaDetails":{"resolutionTime":1440930,"responseTime":1440840,"responseBreach":false,"resolutionBreach":false,"responseBreachDate":"","resolutionBreachDate":""},"source":"INTEGRATION","statusFlow":[{"status":"New","timeSpent":1440729,"createdDate":"2016-07-26T20:13:45+0530","updatedBy":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"}},{"status":"Open","timeSpent":96,"reason":"CR Open","createdDate":"2016-08-12T12:25:54+0530","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"Pending","timeSpent":5,"reason":"CR Pending","createdDate":"2016-08-12T12:27:30+0530","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"Open","timeSpent":11,"reason":"CR Open","createdDate":"2016-08-12T12:27:35+0530","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"Resolved","timeSpent":12,"reason":"CR Resolved","createdDate":"2016-08-12T12:27:46+0530","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"On Hold","timeSpent":9062350,"reason":"CR Onhold","createdDate":"2016-08-12T12:27:58+0530","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"Open","timeSpent":94,"reason":"CR Open","notes":"Resolved","createdDate":"2016-11-25T09:47:08+0530","updatedBy":{"id":"USR0000000018","loginName":"superadmin","lastName":"Admin","firstName":"SP","email":"sample@opsramp.com"}},{"status":"Closed","reason":"Request is implemented","notes":"Demo note on change request","createdDate":"2016-11-25T09:48:42+0530","updatedBy":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"}}]}}}}}}},"parameters":[{"in":"path","name":"tenantId","schema":{"type":"string"},"required":true,"description":"Describes clientId or mspId of the tenant"},{"name":"changeRequestId","in":"path","required":true,"schema":{"type":"string"},"description":"Unique Identifier (UUID) of change request"}]}