{"summary":"Close incident","description":"Closes an incident.\n\nFollow the steps before closing an incident:\n\nStep 1: Check the status flow transition for Closed.\n1. Login to OpsRamp.\n2. Click Setup.\n3. On the left-hand side panel, click Service Desk.\n4. In Configuration, click Status Flows.\n5. Check the status flow for the entity Incidents.\n6. Check the transition of the status Closed. If Closed is available this indicates the incident can be closed; otherwise, the incident cannot be closed.\n\nStep 2: Provide the reason for changing the status.\n1. Click Setup.\n2. On the left-hand side panel, click Service Desk.\n3. In Configuration, click Status Change Reasons and then click Add.\n4. Select the scope, client, request type and entity status as Closed, provide the reason and then click Submit.\n\nStep 3: Enable the option to provide reason for closing an incident.\nThis is normally an optional step. However, this step is required to provide a reason for closing the incident.\n1. Click Setup.\n2. On the left-hand side panel, click Service Desk.\n3. In Configuration, click Settings.\n4. Select client and then click Customize.\n5. In Incident Request section, select option Enable reasons to change status Close and then click Save.\n\n##### Notes\n- Use the get incident API to check if status Closed and reasons to provide for Close are enabled. If under the field allowedStatus if name: Closed and reasonsEnabled: true, this indicates reasons should be provided for closing an incident.\n- Use the get status change reasons API to provide the reasons to Close. The reasons configured in status: Closed are accepted, but a new provided reason would result in an error.\n- Date format must be yyyy-MM-ddTHH:mm:ssZ (GMT).","operations":{"post":{"description":"","parameters":"","requestBody":{"content":"application/json","schema":{"type":"object","properties":{"reason":{"type":"string","description":"Reason for closing the incident. This is mandatory only if the option Enable reasons to change status Close is enabled for incident in service desk settings (example steps below)."},"notes":{"type":"string","description":"Additional information to add to an incident."}}}},"requestBodyExamples":{"example-1":{"value":{"reason":"Remote consoles issue solved","notes":"Able to launch remote consoles on Windows devices"}}},"responses":{"200":{"description":"OK","schema":{"title":"incident","type":"object","description":"","properties":{"alertIds":{"type":"array","items":{}},"allowedStatus":{"type":"array","items":{"title":"status","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"reasonsEnabled":{"type":"boolean"},"reasonsDefined":{"type":"boolean"}}}},"assignedUser":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"assigneeGroup":{"title":"group","type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"},"userCount":{"type":"integer"}}},"attachedArticles":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"subject":{"type":"string"}}}},"attachedRequests":{"description":"Attach service requests to an incident. Use the search service requests to get list of service requests in a client.","type":"array","items":{"type":"object","properties":{"id":{"type":"string"}}}},"attachments":{"description":"Attach files related to the change request. Convert attachment files to byte stream with base64-encoding. The file size limit of an attachment is 50 MB.","type":"array","items":{"type":"object","properties":{"file":{"type":"string"},"name":{"type":"string"}}}},"businessImpact":{"title":"businessImpact","type":"object","properties":{"uniqueId":{"type":"string"},"name":{"type":"string","description":"Business impact name.\n"},"description":{"type":"string","description":"(Optional) Short summary describing the business impact.\n"},"createdBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"updatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"createdDate":{"type":"string","format":"date-time"},"updatedDate":{"type":"string","format":"date-time"}}},"category":{"description":"Add the change request under a category. Use the get API to get the list of categories.","type":"object","properties":{"id":{"type":"integer"}}},"cc":{"description":"Cc email.","type":"string"},"changePlan":{"description":"Description of the change plan.\n","type":"string"},"changeType":{"description":"Normal or Emergency depending on the Priority of a change request. For example, create a change type Emergency for change requests that must be processed immediately or if Priority of a request is High.","type":"string"},"changeRequest":{"description":"Attach a problem or change request related to the incident. Only a single change request or problem can be attached to an incident.","type":"object","properties":{"id":{"type":"string"}}},"channelId":{"type":"string"},"client":{"title":"client","type":"object","properties":{"id":{"type":"integer"},"uniqueId":{"type":"string"},"name":{"type":"string"},"activated":{"type":"boolean"},"updatedTime":{"type":"string"},"createdTime":{"type":"string","format":"date-time"}}},"closedSummary":{"type":"string"},"consoles":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","enum":["MANAGEMENTCONSOLE","ADMINCONSOLE"],"description":"Console type"},"consoleProtocol":{"type":"string","enum":["RDP","SSH","TELNET","VNC"],"description":"Console protocol.\n"},"options":{"type":"string","description":"Console options.\n"}}}},"createdDate":{"format":"date-time","type":"string"},"createdUser":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"customFields":{"type":"array","items":{"title":"customField","type":"object","description":"User-defined fields. User can create additional fields to attach more information related to the change request. Create a custom field and use the get change request custom fields get the list of the customized fields for change request.","properties":{"id":{"type":"string"},"classCode":{"type":"string"},"displayLabel":{"type":"string"},"name":{"type":"string"},"fieldType":{"type":"string"},"mandatory":{"type":"boolean"},"editable":{"type":"boolean"},"description":{"type":"string"},"value":{"type":"string"},"defaultValue":{"type":"string"},"options":{"type":"array","items":{"type":"object","properties":{"label":{"type":"string"},"value":{"type":"string"}}}},"selectedOption":{"type":"object","properties":{"label":{"type":"string"},"value":{"type":"string"}}},"customField":{"type":"boolean"}}}},"description":{"description":"Ticket description.\n","type":"string"},"dueDate":{"type":"string"},"extTicketId":{"description":"Attach third party ticket ID.","type":"string"},"id":{"type":"string"},"knowledgeArticleIds":{"description":"Attach knowledge base articles related to the change request for further reference. To get a knowledge base article ID:\n1. Log into OpsRamp.\n2. Click Knowledge Base.\n3. Select the required article and then copy the article ID.\n4. Provide the article ID in \"knowledgeArticleIds\" field.\n\nExample: \"knowledgeArticleIds\": 25, 16.","type":"array","items":{"type":"integer"}},"location":{"type":"string"},"notes":{"type":"string"},"oldPriority":{"type":"string"},"oldStatus":{"type":"string"},"parentId":{"type":"string","description":"Attach incident. Provide the incident ID as an attachment."},"participantUsers":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"}}}},"plannedEnd":{"format":"date-time","type":"string"},"plannedStart":{"format":"date-time","type":"string"},"policy":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"policyType":{"type":"string"},"createdDate":{"type":"string"},"updatedDate":{"type":"string"},"executionOrder":{"type":"integer"},"active":{"type":"boolean"}}},"priority":{"description":"Ticket priority with supported priority values: Low, Normal, High, Urgent, and Very Low.\n","type":"string"},"priorityUpdatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"priorityUpdatedDate":{"format":"date-time","type":"string"},"problem":{"description":"Attach a problem or change request related to the incident. Only a single change request or problem can be attached to an incident.","type":"object","properties":{"id":{"type":"string"}}},"reOpenCount":{"type":"integer"},"requester":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"resolutionSummary":{"type":"string"},"resolveDate":{"type":"string","format":"date-time"},"resources":{"type":"array","items":{"title":"resource","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"type":{"type":"string"},"metaData":{"type":"object"},"resourceType":{"type":"string"},"hostName":{"type":"string"},"resourceName":{"type":"string"},"aliasName":{"type":"string"}}}},"rollbackPlan":{"description":"Description of roll back plan.\n","type":"string"},"schedule":{"type":"object","properties":{"startTime":{"type":"string","description":"Schedule start time.\n"},"endTime":{"type":"string","description":"Schedule end time.\n"},"type":{"type":"string","description":"Schedule type.\n"},"timezone":{"type":"string","description":"Schedule time zone. The list of timezones are shown below.\nExample: \"timezone\": \"America/Los_Angeles\""},"pattern":{"description":"Recurrence pattern.\n","type":"object","properties":{"type":{"type":"string","description":"Recurrence pattern type.\n","enum":["daily","weekly","monthly"]},"dayFrequency":{"type":"string","description":"Day on which the time bound request should occur.\n","enum":["everyday","every weekday"]},"weekDays":{"type":"string","description":"Weekdays on which the time bound request should occur.\n","enum":["SUN","MON","TUE","WED","THU","FRI","SAT"]},"dayOfMonth":{"type":"integer","description":"Day of the month on which time bound request should occur.\n","minimum":1,"maximum":31},"weekIndex":{"type":"string","description":"Weekdays on which the time bound request should occur every month.\n","enum":["FIRST","SECOND","THIRD","FOURTH","LAST"]},"dayOfWeek":{"type":"string","description":"Weekdays on which the time bound request should occur every month.\n","enum":["SUN","MON","TUE","WED","THU","FRI","SAT"]}}}}},"serviceRestoreDate":{"type":"string","format":"date-time"},"slaDetails":{"title":"slaDetails","type":"object","properties":{"resolutionTime":{"type":"integer"},"responseTime":{"type":"integer"},"responseBreach":{"type":"boolean"},"resolutionBreach":{"type":"boolean"},"responseBreachDate":{"type":"string"},"resolutionBreachDate":{"type":"string"},"slaPolicy":{"title":"slaPolicy","type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"timezone":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"label":{"type":"string"},"code":{"type":"string"}}},"businessSchedule":{"type":"object","properties":{"id":{"type":"integer"},"shiftType":{"type":"integer"},"startTime":{"type":"string"},"endTime":{"type":"string"},"sunday":{"type":"boolean"},"monday":{"type":"boolean"},"tuesday":{"type":"boolean"},"wednesday":{"type":"boolean"},"thursday":{"type":"boolean"},"friday":{"type":"boolean"},"saturday":{"type":"boolean"}}},"requestType":{"type":"string"},"withinBussinessHours":{"type":"boolean"},"active":{"type":"boolean"},"priority":{"type":"string"},"createdDate":{"type":"string","format":"date-time"},"updatedDate":{"type":"string","format":"date-time"},"responseBreachTime":{"type":"integer"},"resolutionBreachTime":{"type":"integer"},"responseReminders":{"type":"array","items":{"type":"object","properties":{"reminderTime":{"type":"integer"},"percentage":{"type":"integer"},"cc":{"type":"string"}}}},"resolutionReminders":{"type":"array","items":{"type":"object","properties":{"reminderTime":{"type":"integer"},"cc":{"type":"string"}}}},"createdBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"updatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}}}}}},"source":{"type":"string"},"sourceEntityType":{"type":"string"},"sourceEntityTypeId":{"type":"string"},"sourcePolicyType":{"type":"string"},"sourcePolicyTypeId":{"type":"string"},"status":{"type":"string"},"statusFlow":{"type":"array","items":{"title":"statusHistory","type":"object","properties":{"status":{"type":"string"},"timeSpent":{"type":"integer"},"createdDate":{"type":"string","format":"date-time"},"updatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"reason":{"type":"string"},"notes":{"type":"string"}}}},"statusUpdatedBy":{"title":"user","type":"object","properties":{"id":{"type":"string"},"loginName":{"type":"string"},"lastName":{"type":"string"},"firstName":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"}}},"statusUpdatedDate":{"format":"date-time","type":"string"},"subCategory":{"description":"Add the change request under a sub-category. Use get categories to get the list of sub-categories.","type":"object","properties":{"id":{"type":"integer"}}},"subject":{"description":"Ticket subject.\n","type":"string"},"tags":{"type":"string"},"testPlan":{"description":"Description of test plan.\n","type":"string"},"ticketArisedTime":{"type":"string"},"toEmail":{"type":"string","description":"Email address of the user. An email notification is sent to the user."},"updatedDate":{"format":"date-time","type":"string"},"urgency":{"type":"object","properties":{"id":{"type":"integer"}}},"workEnd":{"format":"date-time","type":"string"},"workStart":{"format":"date-time","type":"string"}}},"examples":{"example-1":{"value":{"id":"INC0000000247","subject":"Remote console issue on Windows devices","description":"Not able to launch consoles on Windows devices in SJ center","status":"Closed","oldStatus":"Pending","priority":"Normal","oldPriority":"Low","notes":"closed summary","closedSummary":"closed summary","requester":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"},"assignedUser":{"id":"USR0000000011","loginName":"brocadeInc@opsramp.com","lastName":"Inc Admin","firstName":"Brocade","email":"sample@opsramp.com","phoneNumber":"8096250653"},"assigneeGroup":{"id":5,"name":"Brocade Inc Users","description":"Brocade Partner Users"},"resources":[{"id":"ee7e0a88-8d0a-4db7-8bcf-2b3f85fd3011","name":"HYDLPT177","type":"DEVICE"},{"id":"SGP-c2af3866-fc89-47dd-b83f-bcc8df0b2a0a","name":"VTH Services","type":"SERVICE"}],"extTicketId":"000042526342","customFields":[{"id":"UDF0000003778","classCode":"INCIDENT","displayLabel":"for service provider","name":"for_service_provider_3778","fieldType":"TYPE_TEXT","mandatory":false,"editable":true,"description":"all clients and all partners"},{"id":"UDF0000003779","classCode":"INCIDENT","displayLabel":"for service prov 2","name":"for_service_prov_2_3779","fieldType":"TYPE_CHECKBOX","mandatory":false,"editable":true,"description":"all partners and clients","options":[{"label":"yes","value":"1"}]},{"id":"UDF0000003780","classCode":"INCIDENT","displayLabel":"for service pro 3","name":"for_service_pro_3_3780","fieldType":"TYPE_TEXT","mandatory":false,"editable":true,"description":"service provider"}],"dueDate":"2016-11-29T08:06:00+0000","ticketArisedTime":"","cc":"sample@opsramp.com","createdUser":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"},"reason":"closed","category":{"id":1,"name":"Urgency"},"alertIds":[],"toEmail":"sam@opsramp.com","reOpenCount":0,"createdDate":"2016-08-10T16:46:24+0000","serviceRestoreDate":"2016-11-29T08:06:00+0000","allowedStatus":[],"client":{"id":8,"uniqueId":"client_8","name":"Brocade Lab","activated":true},"subCategory":{"id":4,"name":"P1"},"sourcePolicyType":"INTEGRATION","updatedDate":"2016-11-25T08:11:12+0000","priorityUpdatedBy":{"id":"USR0000000018","loginName":"superadmin","lastName":"Admin","firstName":"SP","email":"sample@opsramp.com"},"priorityUpdatedDate":"2016-11-25T08:08:16+0000","statusUpdatedBy":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"},"statusUpdatedDate":"2016-11-25T08:11:12+0000","closedDate":"2016-11-25T08:11:12+0000","slaDetails":{"slaPolicy":{"id":6,"name":"P4_INCIDENT_SLA","timezone":{"id":"12","name":"GMT","label":"Greenwich Mean Time","code":"GMT"},"businessSchedule":{"startTime":"10:00:00","endTime":"20:00:00","sunday":false,"monday":true,"tuesday":true,"wednesday":true,"thursday":true,"friday":true,"saturday":false}},"resolutionTime":2747615,"responseTime":1847615,"responseBreach":false,"resolutionBreach":true,"responseBreachDate":"2016-08-10T12:16:24+0000","resolutionBreachDate":"2016-08-10T13:16:24+0000"},"source":"INTEGRATION","sourceEntityType":"INCIDENT","statusFlow":[{"status":"New","timeSpent":6153310,"createdDate":"2016-08-10T16:46:25+0000","updatedBy":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"}},{"status":"Pending","timeSpent":19,"reason":"Waiting for customer inputs","createdDate":"2016-10-20T22:01:35+0000","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"Open","timeSpent":233,"reason":"Started working on Incident","createdDate":"2016-10-20T22:01:54+0000","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"Pending","timeSpent":47,"reason":"Waiting for customer inputs","createdDate":"2016-10-20T22:05:47+0000","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"Open","timeSpent":3060102,"reason":"Started working on Incident","createdDate":"2016-10-20T22:06:34+0000","updatedBy":{"loginName":"john.smith","lastName":"smith","firstName":"john","email":"sample@opsramp.com","phoneNumber":"9985597783"}},{"status":"Pending","timeSpent":176,"reason":"Waiting for customer inputs","createdDate":"2016-11-25T08:08:16+0000","updatedBy":{"id":"USR0000000018","loginName":"superadmin","lastName":"Admin","firstName":"SP","email":"sample@opsramp.com"}},{"status":"Closed","reason":"Issue is fixed","notes":"closed summary","createdDate":"2016-11-25T08:11:12+0000","updatedBy":{"loginName":"ops_admin_user","lastName":" ","firstName":"Ops Admin","email":"sample@opsramp.com"}}]}}}}}}},"parameters":[{"in":"path","name":"tenantId","schema":{"type":"string"},"required":true},{"schema":{"type":"string"},"in":"path","name":"incidentId","required":true}]}